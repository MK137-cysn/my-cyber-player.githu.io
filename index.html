<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Upload Player</title>
    <style>
        :root { --neon: #00f2ff; --bg: #050505; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
        
        /* ·ü°. ·ûò·û∏·ûì·ûª·ûô·ûõ·û∂·ûÄ·üã·ûá·û∑·ûè */
        .menu-btn { position: fixed; top: 20px; left: 20px; z-index: 1000; font-size: 24px; cursor: pointer; color: var(--neon); opacity: 0.5; }
        .menu-btn:hover { opacity: 1; }
        
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .modal-content { background: #111; padding: 25px; border-radius: 20px; width: 300px; border: 1px solid var(--neon); text-align: center; }
        
        input[type="text"] { width: 100%; padding: 12px; margin-bottom: 12px; border-radius: 8px; border: 1px solid #333; background: #000; color: white; box-sizing: border-box; outline: none; }
        
        /* ·ûö·ûÖ·ûì·û∂·ûî·üä·ûº·ûè·ûª·ûÑ Upload ·û±·üí·ûô·ûü·üí·û¢·û∂·ûè */
        .file-label { display: block; padding: 10px; margin-bottom: 15px; border: 1px dashed var(--neon); border-radius: 8px; cursor: pointer; color: var(--neon); font-size: 13px; }
        #fileInput { display: none; }

        .btn-apply { width: 100%; padding: 12px; background: var(--neon); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; }

        /* ·ü¢. ·ûî·üí·ûö·û¢·ûî·üã Player */
        .player-card { width: 240px; padding: 25px; background: rgba(255, 255, 255, 0.02); border-radius: 35px; border: 3px solid var(--neon); text-align: center; box-shadow: 0 0 20px var(--neon); transition: all 0.2s; }
        #coverArt { width: 180px; height: 180px; border-radius: 20px; margin: 0 auto 15px; background-size: cover; background-position: center; background-image: url('https://via.placeholder.com/200?text=Upload+Image'); border: 1px solid rgba(255, 255, 255, 0.1); }
        
        .visualizer { display: flex; justify-content: center; align-items: flex-end; height: 25px; gap: 4px; margin-bottom: 15px; }
        .bar { width: 5px; background: var(--neon); border-radius: 3px; height: 4px; transition: height 0.15s, background 0.3s; }
        
        .song-title { font-size: 13px; color: var(--neon); font-weight: bold; margin-bottom: 12px; letter-spacing: 1px; }
        input[type="range"] { width: 100%; accent-color: var(--neon); cursor: pointer; }
        .time-box { display: flex; justify-content: space-between; font-size: 10px; color: #555; margin-top: 5px; }
        
        .yt-hide { width: 100%; height: 60px; overflow: hidden; margin-top: 15px; border-radius: 10px; border: 1px solid #333; }
        #yt-player { margin-top: -65px; }
    </style>
</head>
<body>

    <div class="menu-btn" onclick="openM()">‚ò∞</div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <h4 style="margin-top:0; color:var(--neon)">SETTINGS</h4>
            
            <input type="text" id="ytUrl" placeholder="·ûï·û∂·ûü Link YouTube ·ûì·üÖ·ûë·û∏·ûì·üÅ·üá...">
            
            <label class="file-label" for="fileInput" id="fileLabel">üìÅ ·ûÖ·ûª·ûÖ·ûë·û∏·ûì·üÅ·üá·ûä·ûæ·ûò·üí·ûî·û∏ Upload ·ûö·ûº·ûî·ûó·û∂·ûñ</label>
            <input type="file" id="fileInput" accept="image/*">
            
            <button class="btn-apply" onclick="updateP()">APPLY & PLAY</button>
            <div class="yt-hide"><div id="yt-player"></div></div>
            <button onclick="closeM()" style="background:none; border:none; color:#444; cursor:pointer; margin-top:10px;">·ûî·û∑·ûë·ûú·û∑·ûâ</button>
        </div>
    </div>

    <div class="player-card" id="mainCard">
        <div id="coverArt"></div>
        <div class="visualizer" id="viz">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>
        <div class="song-title" id="songLabel">STREAMING PLAYER</div>
        <input type="range" id="seek" value="0">
        <div class="time-box"><span id="curr">0:00</span><span id="total">0:00</span></div>
    </div>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player, timer, vizInt;
        let colors = ['#00f2ff', '#00ffaa', '#ff00ea', '#ffff00', '#ff4d00', '#7a00ff'];
        let uploadedImg = null;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('yt-player', { events: { 'onStateChange': onState } });
        }

        // ·ûò·ûª·ûÅ·ûÑ·û∂·ûö·û¢·û∂·ûì·ûØ·ûÄ·ûü·û∂·ûö·ûö·ûº·ûî·ûó·û∂·ûñ·ûä·üÇ·ûõ·ûî·û∂·ûì Upload
        document.getElementById('fileInput').onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    uploadedImg = event.target.result;
                    document.getElementById('fileLabel').innerText = "‚úÖ ·ûö·ûº·ûî·ûó·û∂·ûñ·ûè·üí·ûö·ûº·ûú·ûî·û∂·ûì·ûá·üí·ûö·ûæ·ûü·ûö·ûæ·ûü";
                    document.getElementById('fileLabel').style.borderColor = "#00ffaa";
                };
                reader.readAsDataURL(file);
            }
        };

        function openM() { document.getElementById('modal').style.display = 'flex'; }
        function closeM() { document.getElementById('modal').style.display = 'none'; }

        function updateP() {
            const id = extractID(document.getElementById('ytUrl').value);
            const cover = document.getElementById('coverArt');

            if (id) {
                // ·ûî·ûæ·ûò·û∂·ûì·ûÄ·û∂·ûö Upload ·ûö·ûº·ûî ·ûú·û∂·ûì·ûπ·ûÑ·ûî·üí·ûö·ûæ·ûö·ûº·ûî Upload ·ûî·ûæ·û¢·ûè·üã·ûë·üÅ ·ûú·û∂·ûì·ûπ·ûÑ·ûë·û∂·ûâ·ûö·ûº·ûî·ûñ·û∏ YouTube
                cover.style.backgroundImage = uploadedImg ? `url('${uploadedImg}')` : `url('https://img.youtube.com/vi/${id}/maxresdefault.jpg')`;
                player.loadVideoById(id);
                document.getElementById('songLabel').innerText = "SYNCING AUDIO...";
            }
        }

        function onState(e) {
            if (e.data == 1) { 
                startTimer(); startViz(); 
                setTimeout(closeM, 3000); 
            } else { 
                clearInterval(timer); stopViz(); 
            }
        }

        function startViz() {
            const bars = document.querySelectorAll('.bar');
            const card = document.getElementById('mainCard');
            vizInt = setInterval(() => {
                let color = colors[Math.floor(Math.random() * colors.length)];
                card.style.borderColor = color;
                card.style.boxShadow = `0 0 25px ${color}`;
                bars.forEach(b => {
                    b.style.height = (Math.random() * 20 + 5) + 'px';
                    b.style.background = color;
                });
            }, 250);
        }

        function stopViz() {
            clearInterval(vizInt);
            const def = '#00f2ff';
            document.querySelectorAll('.bar').forEach(b => { b.style.height = '4px'; b.style.background = def; });
            document.getElementById('mainCard').style.borderColor = def;
        }

        function startTimer() {
            timer = setInterval(() => {
                const c = player.getCurrentTime(), d = player.getDuration();
                document.getElementById('curr').innerText = format(c);
                document.getElementById('total').innerText = format(d);
                document.getElementById('seek').value = (c / d) * 100;
            }, 1000);
        }

        document.getElementById('seek').oninput = function() { player.seekTo((this.value / 100) * player.getDuration()); };
        function format(s) { let m = Math.floor(s/60), sec = Math.floor(s%60); return m + ":" + (sec < 10 ? '0' + sec : sec); }
        function extractID(url) {
            const reg = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(reg);
            return (match && match[2].length === 11) ? match[2] : null;
        }
    </script>
</body>
</html>
